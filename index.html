<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2FA 验证器</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div class="app">
    <!-- 顶部导航 -->
    <header class="header">
      <div class="header-left">
        <div class="logo">Google 2FA</div>
        <nav class="nav">
          <button class="nav-btn active" data-view="home">验证码</button>
          <button class="nav-btn" data-view="manage">管理</button>
        </nav>
      </div>
      <div class="header-right">
        <button class="icon-btn" id="themeBtn" title="切换主题">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
        </button>
        <button class="icon-btn" id="addBtn" title="添加">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- 搜索栏 -->
    <div class="toolbar">
      <input type="search" id="searchInput" class="search" placeholder="搜索...">
      <select id="sortSelect" class="sort-select">
        <option value="default">默认排序</option>
        <option value="name">按名称</option>
        <option value="recent">最近使用</option>
      </select>
    </div>

    <!-- 主内容区 -->
    <main class="main">
      <!-- 首页视图 - 双栏验证码卡片 -->
      <div id="homeView" class="view active">
        <div class="code-grid" id="codeGrid"></div>
        <div class="empty-state" id="emptyState">
          <div class="empty-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0110 0v4"/>
            </svg>
          </div>
          <p>暂无验证码</p>
          <button class="btn-primary" id="addFirstBtn">添加第一个</button>
        </div>
      </div>

      <!-- 管理视图 - 列表 -->
      <div id="manageView" class="view">
        <div class="manage-list" id="manageList"></div>
      </div>
    </main>

    <!-- 导入/添加弹窗 -->
    <dialog id="addDialog" class="dialog">
      <form class="dialog-content" id="addForm">
        <div class="dialog-header">
          <h3 id="dialogTitle">添加验证码</h3>
          <button type="button" class="close-btn" id="closeDialog">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>

        <!-- 简单模式：只需名字和密钥 -->
        <div class="form-basic">
          <label class="form-label">
            <span>名称</span>
            <input type="text" id="nameInput" placeholder="例如：GitHub" required>
          </label>
          <label class="form-label">
            <span>发行方</span>
            <input type="text" id="issuerInput" placeholder="可选，例如：Google">
          </label>
          <label class="form-label">
            <span>密钥</span>
            <div class="input-with-paste">
              <textarea id="secretInput" rows="2" placeholder="粘贴密钥或 otpauth:// 链接" required></textarea>
              <button type="button" class="paste-btn" id="pasteBtn" title="从剪贴板粘贴">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/>
                  <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
                </svg>
              </button>
            </div>
          </label>
        </div>

        <!-- 高级选项 -->
        <details class="advanced">
          <summary>高级选项</summary>
          <div class="form-advanced">
            <div class="form-row">
              <label class="form-label">
                <span>算法</span>
                <select id="algorithmInput">
                  <option value="SHA1" selected>SHA1</option>
                  <option value="SHA256">SHA256</option>
                  <option value="SHA512">SHA512</option>
                </select>
              </label>
              <label class="form-label">
                <span>位数</span>
                <select id="digitsInput">
                  <option value="6" selected>6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                </select>
              </label>
            </div>
            <div class="form-row">
              <label class="form-label">
                <span>类型</span>
                <select id="otpTypeInput">
                  <option value="totp" selected>TOTP</option>
                  <option value="hotp">HOTP</option>
                </select>
              </label>
              <label class="form-label">
                <span>周期（秒）</span>
                <input type="number" id="periodInput" value="30" min="10" max="120">
              </label>
            </div>
            <label class="form-label" id="counterLabel" style="display:none">
              <span>计数器（HOTP）</span>
              <input type="number" id="counterInput" value="0" min="0">
            </label>
          </div>
        </details>

        <div class="dialog-actions">
          <button type="button" class="btn-danger" id="deleteBtn" style="display:none">删除</button>
          <button type="submit" class="btn-primary">保存</button>
        </div>
      </form>
    </dialog>

    <!-- 导入菜单弹窗 -->
    <dialog id="importMenuDialog" class="dialog">
      <div class="dialog-content">
        <div class="dialog-header">
          <h3>导入</h3>
          <button type="button" class="close-btn" id="closeImportMenu">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <div class="import-menu">
          <button class="import-option" id="importQrBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
              <rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/>
            </svg>
            <span>扫描屏幕二维码</span>
          </button>
          <label class="import-option">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/>
            </svg>
            <span>从图片识别二维码</span>
            <input type="file" id="qrFileInput" accept="image/*" hidden>
          </label>
          <button class="import-option" id="importOtpauthBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/>
              <path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/>
            </svg>
            <span>粘贴 otpauth:// 链接</span>
          </button>
          <button class="import-option" id="importJsonBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
              <polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/>
            </svg>
            <span>导入 JSON 备份</span>
          </button>
        </div>
      </div>
    </dialog>

    <!-- Toast 提示 -->
    <div id="toast" class="toast"></div>
  </div>

  <script src="index.js"></script>
</body>
</html>
